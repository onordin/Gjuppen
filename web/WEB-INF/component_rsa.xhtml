<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>

	<meta http-equiv="Content-Type"
		content="application/xhtml+xml; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<link rel="stylesheet" href="../css/bootstrap.min.css" />
	<link rel="stylesheet" href="../css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" />
	<link rel="stylesheet" href="../css/style.css" />

	<script type='text/javascript' src="https://cdn.rawgit.com/jamesallardice/Placeholders.js/master/dist/placeholders.min.js"></script>
	<script src="../js/jquery-3.1.0.min.js" />
	<script src="../js/bootstrap.min.js" />


</h:head>

<h:body>

	<div class="container">
	
		<br></br>
		<hr></hr>
	
	
		<div class="row">
			<div class="col-sm-10" id="RSA">
				<h3>Demo HTTPS/SSL (RSA)</h3>
					<br/>
					
					<h:form>
			        <h:commandButton value="Setup RSA keys">
			        	<f:ajax listener="#{encryptionBean.setupForNewDemo()}" render="privateExp privateMod publicExp publicMod"/>
			        </h:commandButton>
			        </h:form>
			        
			        
			        <div class="keyBox">
				        <h:outputText class="RSAheader" value="Generated RSA Public Key:"></h:outputText>
				      	<br/>
				      	<h:outputText class="RSAheader" value="Public Exponent: "></h:outputText>
				      	<h:outputText id="publicExp" value="#{encryptionBean.publicKeyExp}"></h:outputText>
				      	<br/>
				      	<h:outputText class="RSAheader" value="Private ExPublic Modulus: "></h:outputText>
				      	<h:outputText id="publicMod" value="#{encryptionBean.publicKeyMod}"></h:outputText>
			      	<br/>
			      	</div>
			      	<br/>
			      	<div class="keyBox">
				      	<h:outputText class="RSAheader" value="Generated RSA Private Key: "></h:outputText>
				      	<h:outputText class="RSAheaderHighlight" value="(normally kept at the server)"></h:outputText>
				      	<br/>
				      	<h:outputText class="RSAheader" value="Private Exponent: "></h:outputText>
				      	<h:outputText id="privateExp" value="#{encryptionBean.privateKeyExp}"></h:outputText>
				      	<br/>
				      	<h:outputText class="RSAheader" value="Private Modulus "></h:outputText>
				      	<h:outputText id="privateMod" value="#{encryptionBean.privateKeyMod}"></h:outputText>
					</div>
					

					<h:form>
						<br/>
				      	<h:inputText id="entered" value="#{encryptionBean.textEntered}" required="true"
								requiredMessage="This field is required"></h:inputText>
				      	<br/>
				      	
				        <h:commandButton value="Encrypt using public key">
				        	<f:ajax execute="entered" listener="#{encryptionBean.encryptMessage()}" render="encryptedDiv encrypted"/>
				        </h:commandButton>
				        <h:outputText class="RSAheader" value="(This normally takes place in your web browser)"></h:outputText>
			        </h:form>
					
					<div id="encryptedDiv">
					<h:outputText id="encrypted" value="#{encryptionBean.textEncrypted}"></h:outputText>
					</div>
						
					<br/>
			    	<h:form>
					<h:commandButton value="Decrypt again using private key">
						<f:ajax listener="#{encryptionBean.decryptMessage()}" render="decryptedDiv decrypted"/>
					</h:commandButton>
					<h:outputText class="RSAheader" value="(This normally takes place back att the server)"></h:outputText>
			        </h:form>
					
					<div id="decryptedDiv">
					<h:outputText id="decrypted" value="#{encryptionBean.textDecrypted}"></h:outputText>
					</div>
					<br/>
					<div id="space"></div>
		
			</div>
		</div>   <!-- end of row -->
	</div>	<!-- end of container -->


</h:body>

</html>